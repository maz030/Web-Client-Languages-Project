function toggleSignIn(){if(firebase.auth().currentUser){firebase.auth().signOut()}
else{var email=document.getElementById('inputEmail').value;var password=document.getElementById('inputPassword').value;if(email.length<4){alert('Please enter an email address.');return}
if(password.length<4){alert('Please enter a password.');return}
firebase.auth().signInWithEmailAndPassword(email,password).catch(function(error){var errorCode=error.code;var errorMessage=error.message;if(errorCode=='auth/wrong-password'){alert('Wrong password')}
else{alert(errorMessage)}
console.log(error);document.getElementById('logIn').disabled=!1})}}
function toggleSignInWithGoogle(){if(!firebase.auth().currentUser){var provider=new firebase.auth.GoogleAuthProvider();provider.addScope('https://www.googleapis.com/auth/plus.login');firebase.auth().signInWithPopup(provider).catch(function(error){var errorCode=error.code;var errorMessage=error.message;var email=error.email;var credential=error.credential;if(errorCode==='auth/account-exists-with-different-credential'){alert('You have already signed up with a different auth provider for that email.')}
else{console.error(error)}})}else{firebase.auth().signOut()}}
function initAppLogin(){firebase.auth().onAuthStateChanged(function(user){if(user){var displayName=user.displayName;var email=user.email;var photoURL=user.photoURL;var isAnonymous=user.isAnonymous;var uid=user.uid;var providerData=user.providerData;window.location='mainpage.html'}
else{document.getElementById('logIn').textContent='Log In';document.getElementById('logInWithGoogle').textContent='Log in with Google'}
document.getElementById('logIn').disabled=!1});document.getElementById('logIn').addEventListener('click',toggleSignIn,!1);document.getElementById('logInWithGoogle').addEventListener('click',toggleSignInWithGoogle,!1)}
function handleSignUp(){var email=document.getElementById('inputEmail').value;var password=document.getElementById('inputPassword').value;if(email.length<4){alert('Please enter an email address.');return}
if(password.length<4){alert('Please enter a password.');return}
firebase.auth().createUserWithEmailAndPassword(email,password).then(function(){firebase.auth().signOut();var elem=document.getElementById('signUp');elem.textContent='Congrats, please sign in';elem.disabled=!0;elem.style.backgroundColor='yellow';elem.style.color='red'}).catch(function(error){var errorCode=error.code;var errorMessage=error.message;if(errorCode=='auth/weak-password'){alert('The password is too weak.')}else{alert(errorMessage)}
console.log(error)})}
function initAppSignUp(){document.getElementById('signUp').addEventListener('click',handleSignUp,!1)}
function handleContents(contentName,contentID){var imageRef=firebase.storage().ref('DataInfo/'+contentName+'.png');var contentRef=firebase.database().ref('Contents/'+contentName);contentRef.on('value',function(snapshot){document.getElementById("text_"+contentID).innerHTML=snapshot.val()});imageRef.getDownloadURL().then(function(url){var imgNow=document.getElementById('img_'+contentID);imgNow.src=url}).catch(function(error){})}
function addPageEnd(){var bodyEL=document.getElementsByTagName('body')[0];bodyEL.appendChild(document.createElement('br'));bodyEL.appendChild(document.createElement('br'));var lastP=document.createElement('p');lastP.innerHTML="Contact us | FAQs";lastP.style="text-align: center";bodyEL.appendChild(lastP)}
function getMainContents(){var contenRef=firebase.database().ref('Contents');contenRef.on('value',function(snapshot){chooseList=snapshot.val();var placeLeft=!0;for(key in chooseList){addContentDiv(key,placeLeft);placeLeft=!placeLeft;handleContents(key,key)}
addPageEnd()})}
function getUserContents(){var user=firebase.auth().currentUser;var chooseList;var userEmail=user.email.replace(/[^a-z0-9]/gi,'+').valueOf();var userRef=firebase.database().ref('User/'+userEmail);userRef.on('value',function(snapshot){chooseList=snapshot.val();for(var i=0;i<chooseList.length;i++){addContentDiv(chooseList[i],(i%2==0));handleContents(chooseList[i],chooseList[i])}
addPageEnd()})}
